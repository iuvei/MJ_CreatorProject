{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        tipLabel:cc.Label,\r\n        _stateStr:'',\r\n        _progress:0.0,\r\n        _splash:null,\r\n        _isLoading:false,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        this.initMgr();\r\n        this.tipLabel.string = this._stateStr;\r\n        \r\n        this._splash = cc.find(\"Canvas/splash\");\r\n        this._splash.active = true;\r\n    },\r\n    \r\n    start:function(){        \r\n        var self = this;\r\n        var SHOW_TIME = 3000;\r\n        var FADE_TIME = 500;\r\n        if(cc.sys.os != cc.sys.OS_IOS || !cc.sys.isNative){\r\n            self._splash.active = true;\r\n            var t = Date.now();\r\n            var fn = function(){\r\n                var dt = Date.now() - t;\r\n                if(dt < SHOW_TIME){\r\n                    setTimeout(fn,33);\r\n                }\r\n                else {\r\n                    var op = (1 - ((dt - SHOW_TIME) / FADE_TIME)) * 255;\r\n                    if(op < 0){\r\n                        self._splash.opacity = 0;\r\n                        self.checkVersion();    \r\n                    }\r\n                    else{\r\n                        self._splash.opacity = op;\r\n                        setTimeout(fn,33);   \r\n                    }\r\n                }\r\n            };\r\n            setTimeout(fn,33);\r\n        }\r\n        else{\r\n            this._splash.active = false;\r\n            this.checkVersion();\r\n        }\r\n    },\r\n    \r\n    initMgr:function(){\r\n        cc.vv = {};\r\n        var UserMgr = require(\"UserMgr\");\r\n        cc.vv.userMgr = new UserMgr();\r\n        \r\n        var ReplayMgr = require(\"ReplayMgr\");\r\n        cc.vv.replayMgr = new ReplayMgr();\r\n        \r\n        cc.vv.http = require(\"HTTP\");\r\n        cc.vv.global = require(\"Global\");\r\n        cc.vv.net = require(\"Net\");\r\n        \r\n        var GameNetMgr = require(\"GameNetMgr\");\r\n        cc.vv.gameNetMgr = new GameNetMgr();\r\n        cc.vv.gameNetMgr.initHandlers();\r\n        \r\n        var AnysdkMgr = require(\"AnysdkMgr\");\r\n        cc.vv.anysdkMgr = new AnysdkMgr();\r\n        cc.vv.anysdkMgr.init();\r\n        \r\n        var VoiceMgr = require(\"VoiceMgr\");\r\n        cc.vv.voiceMgr = new VoiceMgr();\r\n        cc.vv.voiceMgr.init();\r\n        \r\n        var AudioMgr = require(\"AudioMgr\");\r\n        cc.vv.audioMgr = new AudioMgr();\r\n        cc.vv.audioMgr.init();\r\n        \r\n        var Utils = require(\"Utils\");\r\n        cc.vv.utils = new Utils();\r\n        \r\n        cc.args = this.urlParse();\r\n    },\r\n    \r\n    urlParse:function(){\r\n        var params = {};\r\n        if(window.location == null){\r\n            return params;\r\n        }\r\n        var name,value; \r\n        var str=window.location.href; //取得整个地址栏\r\n        var num=str.indexOf(\"?\") \r\n        str=str.substr(num+1); //取得所有参数   stringvar.substr(start [, length ]\r\n        \r\n        var arr=str.split(\"&\"); //各个参数放到数组里\r\n        for(var i=0;i < arr.length;i++){ \r\n            num=arr[i].indexOf(\"=\"); \r\n            if(num>0){ \r\n                name=arr[i].substring(0,num);\r\n                value=arr[i].substr(num+1);\r\n                params[name]=value;\r\n            } \r\n        }\r\n        return params;\r\n    },\r\n    \r\n    checkVersion:function(){\r\n        var self = this;\r\n        var onGetVersion = function(ret){\r\n            if(ret.version == null){\r\n                console.log(\"error.\");\r\n            }\r\n            else{\r\n                cc.vv.SI = ret;\r\n                if(ret.version != cc.VERSION){\r\n                    cc.find(\"Canvas/alert\").active = true;\r\n                }\r\n                else{\r\n                    self.startPreloading();\r\n                }\r\n            }\r\n        };\r\n        \r\n        var xhr = null;\r\n        var complete = false;\r\n        var fnRequest = function(){\r\n            self._stateStr = \"正在连接服务器\";\r\n            xhr = cc.vv.http.sendRequest(\"/get_serverinfo\",null,function(ret){\r\n                xhr = null;\r\n                complete = true;\r\n                onGetVersion(ret);\r\n            });\r\n            setTimeout(fn,5000);            \r\n        }\r\n        \r\n        var fn = function(){\r\n            if(!complete){\r\n                if(xhr){\r\n                    xhr.abort();\r\n                    self._stateStr = \"连接失败，即将重试\";\r\n                    setTimeout(function(){\r\n                        fnRequest();\r\n                    },5000);\r\n                }\r\n                else{\r\n                    fnRequest();\r\n                }\r\n            }\r\n        };\r\n        fn();\r\n    },\r\n    \r\n    onBtnDownloadClicked:function(){\r\n        cc.sys.openURL(cc.vv.SI.appweb);\r\n    },\r\n    \r\n    startPreloading:function(){\r\n        this._stateStr = \"正在加载资源，请稍候\";\r\n        this._isLoading = true;\r\n        var self = this;\r\n        \r\n        cc.loader.onProgress = function ( completedCount, totalCount,  item ){\r\n            //console.log(\"completedCount:\" + completedCount + \",totalCount:\" + totalCount );\r\n            if(self._isLoading){\r\n                self._progress = completedCount/totalCount;\r\n            }\r\n        };\r\n        \r\n        cc.loader.loadResAll(\"textures\", function (err, assets) {\r\n            self.onLoadComplete();\r\n        });      \r\n    },\r\n    \r\n    onLoadComplete:function(){\r\n        this._isLoading = false;\r\n        this._stateStr = \"准备登陆\";\r\n        cc.director.loadScene(\"login\");\r\n        cc.loader.onComplete = null;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._stateStr.length == 0){\r\n            return;\r\n        }\r\n        this.tipLabel.string = this._stateStr + ' ';\r\n        if(this._isLoading){\r\n            this.tipLabel.string += Math.floor(this._progress * 100) + \"%\";   \r\n        }\r\n        else{\r\n            var t = Math.floor(Date.now() / 1000) % 4;\r\n            for(var i = 0; i < t; ++ i){\r\n                this.tipLabel.string += '.';\r\n            }            \r\n        }\r\n    }\r\n});"
  ]
}